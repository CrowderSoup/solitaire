:root{
  --table-bg:#0f5132;
  --pile-gap:14px;
  --card-w:92px;
  --card-h:128px;
  --fan-faceup:22px;
  --fan-facedown:6px;
  --radius:10px;
  --shadow:0 2px 6px rgba(0,0,0,.4);
  --accent:#e9ecef;
}
*{box-sizing:border-box}
html, body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: radial-gradient(1000px 700px at 50% -200px, #1a874f, var(--table-bg));
  user-select: none;
  color:#fff;
}

header{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;gap:10px;flex-wrap:wrap}
header h1{font-size:18px;margin:0;font-weight:600;letter-spacing:.3px}
.controls{display:flex;gap:8px;flex-wrap:wrap}
button{background:#f8f9fa;color:#111;border:0;border-radius:8px;padding:8px 12px;box-shadow:var(--shadow);cursor:pointer;font-weight:600}
button:active{transform:translateY(1px)}

.board{padding:12px; display:grid; grid-template-columns: repeat(7, var(--card-w)); justify-content:center; column-gap: var(--pile-gap); row-gap: 45px;}
.row{display:contents}

.pile{position:relative;width:var(--card-w);height:var(--card-h);border-radius:var(--radius);outline:2px dashed rgba(255,255,255,.18);outline-offset:-6px;box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), 0 8px 24px rgba(0,0,0,.25);background: linear-gradient(145deg, rgba(255,255,255,.06), rgba(0,0,0,.15));}
.pile.foundation{background: linear-gradient(145deg, rgba(255,255,255,.10), rgba(0,0,0,.25))}
.pile.highlight-valid{outline-color:#ffd166; box-shadow:0 0 0 3px #ffd16655 inset, 0 8px 24px rgba(0,0,0,.32)}
.pile.drop-hover{outline-color:#ffe08a; box-shadow:0 0 0 3px #ffe08a99 inset, 0 8px 24px rgba(0,0,0,.34)}

.stack{position:absolute; inset:0}

.card{position:absolute;width:var(--card-w);height:var(--card-h);border-radius:var(--radius);background:#fff;color:#111;box-shadow:var(--shadow);transform-origin:center center;transition:transform .12s ease}
.card.faceup:hover{transform:translateY(-2px)}
.card .inner{position:absolute; inset:0; padding:8px}
.rank{font-weight:800; font-size:18px}
.suit{font-size:18px}
.pip{position:absolute; bottom:8px; right:8px; font-size:18px}

.red{color:#c1121f}
.black{color:#111}

.back{background: repeating-linear-gradient(45deg, #234, #234 8px, #2d4e6b 8px, #2d4e6b 16px);border:2px solid #e9ecef; box-shadow: var(--shadow)}
.back::after{content:""; position:absolute; inset:6px; border-radius:8px;background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(0,0,0,.18))}

.drag-ghost{position:fixed; z-index:9999; pointer-events:none}
.drag-ghost .card{box-shadow:0 8px 24px rgba(0,0,0,.45)}

.ghost{opacity:.85; pointer-events:none}
.selected{outline:3px solid #ffd166; outline-offset:-3px}

.hint{font-size:13px; opacity:.85}
.status{display:flex; gap:16px; align-items:center; color:#eee; font-size:14px}
.meter{display:inline-flex; gap:8px; align-items:center}
.dot{wid
